(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{111:function(e,t,n){e.exports=n(415)},196:function(e,t,n){},197:function(e,t,n){},415:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(27),c=n.n(o),l=n(106),s=n.n(l),i=n(107),p=n.n(i),u=n(79),m=n.n(u),y=n(8),h=n(9),d=n(11),b=n(10),g=n(12),E=(n(196),n(197),n(4)),v=n(3),f=n.n(v),w=n(14);function j(){return(j=Object(w.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["encrypt","decrypt"]));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var K=n(18),O=n.n(K),k=n(430),P=function(e){function t(e){var n;return Object(y.a)(this,t),(n=Object(d.a)(this,Object(b.a)(t).call(this,e))).handleChange=n.handleChange.bind(Object(E.a)(n)),n}return Object(g.a)(t,e),Object(h.a)(t,[{key:"handleChange",value:function(e){var t=this;e.preventDefault(),function(){return j.apply(this,arguments)}().then(function(e){console.log("### RootRSAOAEPKey ###"),console.log("key.publicKey",e.publicKey),console.log("key.privateKey",e.privateKey),t.props.onGenerateKey(e)})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(O.a,{onClick:this.handleChange,label:"Generate Root RSA-OAEPKey"})),r.a.createElement("div",null,r.a.createElement(k.a,{variant:"body1",gutterBottom:!0},"Open your console to see the generated root CryptoKey")))}}]),t}(r.a.Component),A=n(431),C=n(47),S=n.n(C),x=n(433),R=function(e){function t(e){var n;return Object(y.a)(this,t),(n=Object(d.a)(this,Object(b.a)(t).call(this,e))).handleRootRSAOAEPKeyChange=n.handleRootRSAOAEPKeyChange.bind(Object(E.a)(n)),n.handleExportKeys=n.handleExportKeys.bind(Object(E.a)(n)),n.handleImportKeys=n.handleImportKeys.bind(Object(E.a)(n)),n.handleEncryptMessage=n.handleEncryptMessage.bind(Object(E.a)(n)),n.handleMessageToEncryptChange=n.handleMessageToEncryptChange.bind(Object(E.a)(n)),n.handleDecryptMessage=n.handleDecryptMessage.bind(Object(E.a)(n)),n.state={RootRSAOAEPKey:{},jwkPublicKey:"",jwkPrivateKey:"",isRootRSAOAEPKeySet:!1,importedPublicKey:"",importedPrivateKey:"",encryptedMessage:"",messageToEncrypt:"Hello World! 12345",decryptedMessage:""},n}return Object(g.a)(t,e),Object(h.a)(t,[{key:"handleRootRSAOAEPKeyChange",value:function(e){this.setState({RootRSAOAEPKey:e,isRootRSAOAEPKeySet:!0})}},{key:"handleExportKeys",value:function(e,t){this.setState({jwkPublicKey:e,jwkPrivateKey:t})}},{key:"handleImportKeys",value:function(e,t){this.setState({importedPublicKey:e,importedPrivateKey:t})}},{key:"handleEncryptMessage",value:function(e){this.setState({encryptedMessage:e})}},{key:"handleMessageToEncryptChange",value:function(e){this.setState({messageToEncrypt:e})}},{key:"handleDecryptMessage",value:function(e){this.setState({decryptedMessage:e})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",null,r.a.createElement(k.a,{component:"p",gutterBottom:!0},"Hello and welcome! My aim here is to try and give a clear example of how we can use WebCrypto in a simple use case and hopefully give you an idea of how you can use it, test it and implement it into your own projects."),r.a.createElement(k.a,{component:"p",gutterBottom:!0},"I will try and give an example User Story that will give us an overview of what we need to achieve and then step by step how we achieve this."),r.a.createElement(k.a,{component:"p",gutterBottom:!0},"Each step will include a link to the react component, encryption library component needed and a code example"),r.a.createElement(k.a,{component:"p",gutterBottom:!0},"All the following methods are wrapped in tests. I would highly recommend reading through the test cases as they can be a great insight on how the code fits together.")),r.a.createElement("section",null,r.a.createElement(k.a,{variant:"h3",component:"h3",gutterBottom:!0},"User Stories"),r.a.createElement(k.a,{component:"p",gutterBottom:!0},r.a.createElement("ol",null,r.a.createElement("li",null,"A user should be able to generate a new, unique encryption key"),r.a.createElement("li",null,"They will be able to export the private and public keys in a format that can be saved"),r.a.createElement("li",null,"They will be able to re-import these keys to use"),r.a.createElement("li",null,"They will be able to encrypt a message using their public key"),r.a.createElement("li",null,"They will be able to decrypt their message using their private key"))),r.a.createElement(A.a,{variant:"middle"})),r.a.createElement("section",null,r.a.createElement(k.a,{variant:"h2",component:"h2",gutterBottom:!0},"Step 1: Root Certificate (RSA-OAEP)"),r.a.createElement(k.a,{component:"p",gutterBottom:!0},r.a.createElement("strong",null,"User Story:")," A user should be able to generate a new, unique encryption key"),r.a.createElement(k.a,{component:"p",gutterBottom:!0},r.a.createElement(x.a,{href:"https://github.com/johnnolan/react-jest-webcrypto/blob/master/src/components/RootRSAOAEPKey.js"},r.a.createElement("strong",null,"Code: "),"React Component"),r.a.createElement("br",null),r.a.createElement(x.a,{href:"https://github.com/johnnolan/react-jest-webcrypto/blob/master/src/lib/RootRSAOAEPKey.js"},r.a.createElement("strong",null,"Code: "),"Lib")),r.a.createElement(S.a,{language:"javascript"},"\n  export async function generateKey () {\n    return window.crypto.subtle.generateKey({\n      name: 'RSA-OAEP',\n      modulusLength: 2048,\n      publicExponent: new Uint8Array([0x01, 0x00, 0x01]),\n      hash: {\n        name: 'SHA-256'\n      }\n    },\n    true,\n    ['encrypt', 'decrypt']\n    )\n  }\n            "),r.a.createElement(P,{onGenerateKey:this.handleRootRSAOAEPKeyChange}),r.a.createElement(k.a,{variant:"body1",gutterBottom:!0},"Root Key Set: ",this.state.isRootRSAOAEPKeySet.toString())),r.a.createElement("section",null,r.a.createElement(A.a,{variant:"middle"}),r.a.createElement(k.a,{variant:"h2",component:"h2",gutterBottom:!0},"Step 2: Export Keys"),r.a.createElement(k.a,{component:"p",gutterBottom:!0},r.a.createElement("strong",null,"User Story:")," They will be able to export the private and public keys in a format that can be saved"),r.a.createElement(k.a,{component:"p",gutterBottom:!0},r.a.createElement(x.a,{href:"https://github.com/johnnolan/react-jest-webcrypto/blob/master/src/components/ExportKeys.js"},r.a.createElement("strong",null,"Code: "),"React Component"),r.a.createElement("br",null),r.a.createElement(x.a,{href:"https://github.com/johnnolan/react-jest-webcrypto/blob/master/src/lib/exportKeys.js"},r.a.createElement("strong",null,"Code: "),"Lib")),r.a.createElement(S.a,{language:"javascript"},"\n  async function exportKey (keyData) {\n    return window.crypto.subtle.exportKey('jwk', keyData)\n      .then((key) => {\n        return (key)\n      })\n  }\n  \n  export async function exportjwkPublicKey (key) {\n    return exportKey(key.publicKey)\n  }\n  \n  export async function exportjwkPrivateKey (key) {\n    return exportKey(key.privateKey)\n  }  \n            "),r.a.createElement(I,{onExportKeys:this.handleExportKeys,rootKey:this.state.RootRSAOAEPKey,jwkPublicKey:this.state.jwkPublicKey,jwkPrivateKey:this.state.jwkPrivateKey,isRootKeySet:this.state.isRootRSAOAEPKeySet})),r.a.createElement("section",null,r.a.createElement(A.a,{variant:"middle"}),r.a.createElement(k.a,{variant:"h2",component:"h2",gutterBottom:!0},"Step 3: Import Key"),r.a.createElement(k.a,{component:"p",gutterBottom:!0},r.a.createElement("strong",null,"User Story:")," They will be able to re-import these keys to use"),r.a.createElement(k.a,{component:"p",gutterBottom:!0},r.a.createElement(x.a,{href:"https://github.com/johnnolan/react-jest-webcrypto/blob/master/src/components/ImportKeys.js"},r.a.createElement("strong",null,"Code: "),"React Component"),r.a.createElement("br",null),r.a.createElement(x.a,{href:"https://github.com/johnnolan/react-jest-webcrypto/blob/master/src/lib/importKeys.js"},r.a.createElement("strong",null,"Code: "),"Lib")),r.a.createElement(S.a,{language:"javascript"},"\n  export async function importPublicFromJwk (keyData) {\n    return window.crypto.subtle.importKey(\n      'jwk',\n      keyData,\n      {\n        name: 'RSA-OAEP',\n        hash: 'SHA-256'\n      },\n      true,\n      ['encrypt']\n    )\n  }\n  \n  export async function importPrivateFromJwk (keyData) {\n    return window.crypto.subtle.importKey(\n      'jwk',\n      keyData,\n      {\n        name: 'RSA-OAEP',\n        hash: 'SHA-256'\n      },\n      true,\n      ['decrypt']\n    )\n  }  \n            "),r.a.createElement(F,{onImportKeys:this.handleImportKeys,jwkPublicKey:this.state.jwkPublicKey,jwkPrivateKey:this.state.jwkPrivateKey,importedPublicKey:this.state.importedPublicKey,importedPrivateKey:this.state.importedPrivateKey})),r.a.createElement("section",null,r.a.createElement(A.a,{variant:"middle"}),r.a.createElement(k.a,{variant:"h2",component:"h2",gutterBottom:!0},"Step 4: SHA Encrypt Object"),r.a.createElement(k.a,{component:"p",gutterBottom:!0},r.a.createElement("strong",null,"User Story:")," They will be able to encrypt a message using their public key"),r.a.createElement(k.a,{component:"p",gutterBottom:!0},r.a.createElement(x.a,{href:"https://github.com/johnnolan/react-jest-webcrypto/blob/master/src/components/EncryptMessage.js"},r.a.createElement("strong",null,"Code: "),"React Component"),r.a.createElement("br",null),r.a.createElement(x.a,{href:"https://github.com/johnnolan/react-jest-webcrypto/blob/master/src/lib/encryptMessage.js"},r.a.createElement("strong",null,"Code: "),"Lib")),r.a.createElement(S.a,{language:"javascript"},"\n  export async function encryptMessage (publicKey, encodedMessage) {\n    return window.crypto.subtle.encrypt(\n      {\n        name: 'RSA-OAEP'\n      },\n      publicKey,\n      encodedMessage\n    )\n  }  \n            "),r.a.createElement(W,{onEncryptMessage:this.handleEncryptMessage,onMessageToEncryptChange:this.handleMessageToEncryptChange,importedPublicKey:this.state.importedPublicKey,messageToEncrypt:this.state.messageToEncrypt,encryptedMessage:this.state.encryptedMessage})),r.a.createElement("section",null,r.a.createElement(A.a,{variant:"middle"}),r.a.createElement(k.a,{variant:"h2",component:"h2",gutterBottom:!0},"Step 5: SHA Decrypt"),r.a.createElement(k.a,{component:"p",gutterBottom:!0},r.a.createElement("strong",null,"User Story:")," They will be able to decrypt their message using their private key"),r.a.createElement(k.a,{component:"p",gutterBottom:!0},r.a.createElement(x.a,{href:"https://github.com/johnnolan/react-jest-webcrypto/blob/master/src/components/DecryptMessage.js"},r.a.createElement("strong",null,"Code: "),"React Component"),r.a.createElement("br",null),r.a.createElement(x.a,{href:"https://github.com/johnnolan/react-jest-webcrypto/blob/master/src/lib/decryptMessage.js"},r.a.createElement("strong",null,"Code: "),"Lib")),r.a.createElement(S.a,{language:"javascript"},"\n  export async function decryptMessage (publicKey, ciphertext) {\n    return window.crypto.subtle.decrypt(\n      {\n        name: 'RSA-OAEP'\n      },\n      publicKey,\n      ciphertext\n    )\n  }  \n            "),r.a.createElement(G,{onDecryptMessage:this.handleDecryptMessage,importedPrivateKey:this.state.importedPrivateKey,encryptedMessage:this.state.encryptedMessage,decryptedMessage:this.state.decryptedMessage})))}}]),t}(r.a.Component);function M(e){return B.apply(this,arguments)}function B(){return(B=Object(w.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.crypto.subtle.exportKey("jwk",t).then(function(e){return e}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function T(){return(T=Object(w.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",M(t.publicKey));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function D(){return(D=Object(w.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",M(t.privateKey));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var I=function(e){function t(e){var n;return Object(y.a)(this,t),(n=Object(d.a)(this,Object(b.a)(t).call(this,e))).handleChange=n.handleChange.bind(Object(E.a)(n)),n}return Object(g.a)(t,e),Object(h.a)(t,[{key:"handleChange",value:function(e){var t=this;e.preventDefault();var n=this.props.rootKey;(function(e){return T.apply(this,arguments)})(n).then(function(e){(function(e){return D.apply(this,arguments)})(n).then(function(n){t.props.onExportKeys(e,n)})})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(O.a,{disabled:!this.props.isRootKeySet,onClick:this.handleChange,label:"Export Root RSA-OAEPKeys"})),r.a.createElement("div",null,r.a.createElement(k.a,{variant:"body1",gutterBottom:!0},"Exported JWK Public Key"),r.a.createElement("textarea",{rows:"6",cols:"100",readOnly:!0,value:JSON.stringify(this.props.jwkPublicKey)})),r.a.createElement("div",null,r.a.createElement(k.a,{variant:"body1",gutterBottom:!0},"Exported JWK Private Key"),r.a.createElement("textarea",{rows:"6",cols:"100",readOnly:!0,value:JSON.stringify(this.props.jwkPrivateKey)})))}}]),t}(r.a.Component);function H(){return(H=Object(w.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.crypto.subtle.importKey("jwk",t,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function U(){return(U=Object(w.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.crypto.subtle.importKey("jwk",t,{name:"RSA-OAEP",hash:"SHA-256"},!0,["decrypt"]));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var F=function(e){function t(e){var n;return Object(y.a)(this,t),(n=Object(d.a)(this,Object(b.a)(t).call(this,e))).handleChange=n.handleChange.bind(Object(E.a)(n)),n}return Object(g.a)(t,e),Object(h.a)(t,[{key:"handleChange",value:function(e){var t=this;e.preventDefault();var n=this.props.jwkPublicKey,a=this.props.jwkPrivateKey;(function(e){return H.apply(this,arguments)})(n).then(function(e){(function(e){return U.apply(this,arguments)})(a).then(function(n){console.log("### Imported Keys ###"),console.log("importedPublicKey",e),console.log("importedPrivateKey",n),t.props.onImportKeys(e,n)})})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(O.a,{onClick:this.handleChange,label:"Import Public and Private Key (Check console for CryptoKey)",disabled:""===this.props.jwkPublicKey})),r.a.createElement("div",null,r.a.createElement(k.a,{variant:"body1",gutterBottom:!0},"Imported Public Key: ",(""!==this.props.importedPublicKey).toString())),r.a.createElement("div",null,r.a.createElement(k.a,{variant:"body1",gutterBottom:!0},"Imported Private Key: ",(""!==this.props.importedPrivateKey).toString())))}}]),t}(r.a.Component);function J(){return(J=Object(w.a)(f.a.mark(function e(t,n){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.crypto.subtle.encrypt({name:"RSA-OAEP"},t,n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var W=function(e){function t(e){var n;return Object(y.a)(this,t),(n=Object(d.a)(this,Object(b.a)(t).call(this,e))).handleChange=n.handleChange.bind(Object(E.a)(n)),n.handleMessageChange=n.handleMessageChange.bind(Object(E.a)(n)),n}return Object(g.a)(t,e),Object(h.a)(t,[{key:"handleChange",value:function(e){var t=this;e.preventDefault(),function(e,t){return J.apply(this,arguments)}(this.props.importedPublicKey,(new TextEncoder).encode(this.props.messageToEncrypt)).then(function(e){t.props.onEncryptMessage(e)})}},{key:"handleMessageChange",value:function(e){this.props.onMessageToEncryptChange(e.target.value)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(O.a,{disabled:""===this.props.importedPublicKey,onClick:this.handleChange,label:"Encrypt Message"})),r.a.createElement("div",null,r.a.createElement(k.a,{variant:"body1",gutterBottom:!0},"Message to Encrypt"),r.a.createElement("textarea",{rows:"6",cols:"100",value:this.props.messageToEncrypt,onChange:this.handleMessageChange})),r.a.createElement("div",null,r.a.createElement(k.a,{variant:"body1",gutterBottom:!0},"Encrypted Message (ArrayBuffer to Hex for demo)"),r.a.createElement("textarea",{rows:"6",cols:"100",readOnly:!0,value:(e=this.props.encryptedMessage,Array.prototype.map.call(new Uint8Array(e),function(e){return("00"+e.toString(16)).slice(-2)}).join(""))})));var e}}]),t}(r.a.Component);function L(){return(L=Object(w.a)(f.a.mark(function e(t,n){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.crypto.subtle.decrypt({name:"RSA-OAEP"},t,n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var G=function(e){function t(e){var n;return Object(y.a)(this,t),(n=Object(d.a)(this,Object(b.a)(t).call(this,e))).handleChange=n.handleChange.bind(Object(E.a)(n)),n}return Object(g.a)(t,e),Object(h.a)(t,[{key:"handleChange",value:function(e){var t=this;e.preventDefault(),function(e,t){return L.apply(this,arguments)}(this.props.importedPrivateKey,this.props.encryptedMessage).then(function(e){t.props.onDecryptMessage((new TextDecoder).decode(e))})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(O.a,{disabled:""===this.props.importedPrivateKey||""===this.props.encryptedMessage,onClick:this.handleChange,label:"Decrypt Message"})),r.a.createElement("div",null,r.a.createElement(k.a,{variant:"body1",gutterBottom:!0},"Decrypted Message"),r.a.createElement("textarea",{rows:"6",cols:"100",readOnly:!0,value:this.props.decryptedMessage})))}}]),t}(r.a.Component),q=n(432),N=function(e){function t(){return Object(y.a)(this,t),Object(d.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement(q.a,{maxWidth:"sm"},r.a.createElement(k.a,{variant:"h1",component:"h1",gutterBottom:!0},"Test WebCrypto"),r.a.createElement(R,null))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(function(){return r.a.createElement(p.a,{muiTheme:m()(s.a)},r.a.createElement(N,null))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[111,1,2]]]);
//# sourceMappingURL=main.a506f325.chunk.js.map