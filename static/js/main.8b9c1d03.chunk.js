(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{110:function(e,t,a){e.exports=a(225)},195:function(e,t,a){},225:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(27),c=a.n(o),l=a(105),s=a.n(l),i=a(106),p=a.n(i),u=a(78),m=a.n(u),h=a(8),y=a(9),d=a(11),b=a(10),g=a(12),E=(a(195),a(4)),v=a(3),f=a.n(v),j=a(14);function w(){return(w=Object(j.a)(f.a.mark(function e(){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["encrypt","decrypt"]));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var K=a(18),O=a.n(K),k=a(240),C=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(b.a)(t).call(this,e))).handleChange=a.handleChange.bind(Object(E.a)(a)),a}return Object(g.a)(t,e),Object(y.a)(t,[{key:"handleChange",value:function(e){var t=this;e.preventDefault(),function(){return w.apply(this,arguments)}().then(function(e){console.log("### RootRSAOAEPKey ###"),console.log("key.publicKey",e.publicKey),console.log("key.privateKey",e.privateKey),t.props.onGenerateKey(e)})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(O.a,{onClick:this.handleChange,label:"Generate Root RSA-OAEPKey"})),r.a.createElement("div",null,r.a.createElement(k.a,{variant:"body1",gutterBottom:!0},"Open your console to see the generated root CryptoKey")))}}]),t}(r.a.Component),P=a(241),S=a(243),A=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(b.a)(t).call(this,e))).handleRootRSAOAEPKeyChange=a.handleRootRSAOAEPKeyChange.bind(Object(E.a)(a)),a.handleExportKeys=a.handleExportKeys.bind(Object(E.a)(a)),a.handleImportKeys=a.handleImportKeys.bind(Object(E.a)(a)),a.handleEncryptMessage=a.handleEncryptMessage.bind(Object(E.a)(a)),a.handleMessageToEncryptChange=a.handleMessageToEncryptChange.bind(Object(E.a)(a)),a.handleDecryptMessage=a.handleDecryptMessage.bind(Object(E.a)(a)),a.state={RootRSAOAEPKey:{},jwkPublicKey:"",jwkPrivateKey:"",isRootRSAOAEPKeySet:!1,importedPublicKey:"",importedPrivateKey:"",encryptedMessage:"",messageToEncrypt:"Hello World! 12345",decryptedMessage:""},a}return Object(g.a)(t,e),Object(y.a)(t,[{key:"handleRootRSAOAEPKeyChange",value:function(e){this.setState({RootRSAOAEPKey:e,isRootRSAOAEPKeySet:!0})}},{key:"handleExportKeys",value:function(e,t){this.setState({jwkPublicKey:e,jwkPrivateKey:t})}},{key:"handleImportKeys",value:function(e,t){this.setState({importedPublicKey:e,importedPrivateKey:t})}},{key:"handleEncryptMessage",value:function(e){this.setState({encryptedMessage:e})}},{key:"handleMessageToEncryptChange",value:function(e){this.setState({messageToEncrypt:e})}},{key:"handleDecryptMessage",value:function(e){this.setState({decryptedMessage:e})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",null,r.a.createElement(k.a,{component:"p",gutterBottom:!0},"Hello and welcome! My aim here is to try and give a clear example of how we can use WebCrypto in a simple use case and hopefully give you an idea of how you can use it, test it and implement it into your own projects."),r.a.createElement(k.a,{component:"p",gutterBottom:!0},"I will try and give an example User Story that will give us an overview of what we need to achieve and then step by step how we achieve this."),r.a.createElement(k.a,{component:"p",gutterBottom:!0},"Each step will include a link to the react component, encryption library component needed and a explanation of what each is doing.")),r.a.createElement("section",null,r.a.createElement(k.a,{variant:"h3",component:"h3",gutterBottom:!0},"User Stories"),r.a.createElement(k.a,{component:"p",gutterBottom:!0},r.a.createElement("ol",null,r.a.createElement("li",null,"A user should be able to generate a new, unique encryption key"),r.a.createElement("li",null,"They will be able to export the private and public keys in a format that can be saved"),r.a.createElement("li",null,"They will be able to re-import these keys to use"),r.a.createElement("li",null,"They will be able to encrypt a message using their public key"),r.a.createElement("li",null,"They will be able to decrypt their message using their private key"))),r.a.createElement(P.a,{variant:"middle"})),r.a.createElement("section",null,r.a.createElement(k.a,{variant:"h2",component:"h2",gutterBottom:!0},"Step 1: Root Certificate (PBK)"),r.a.createElement(k.a,{component:"p",gutterBottom:!0},r.a.createElement("strong",null,"User Story:")," A user should be able to generate a new, unique encryption key"),r.a.createElement(k.a,{component:"p",gutterBottom:!0},r.a.createElement(S.a,{href:"https://github.com/johnnolan/react-jest-webcrypto/blob/master/src/components/RootRSAOAEPKey.js"},r.a.createElement("strong",null,"Code: "),"React Component"),r.a.createElement("br",null),r.a.createElement(S.a,{href:"https://github.com/johnnolan/react-jest-webcrypto/blob/master/src/lib/RootRSAOAEPKey.js"},r.a.createElement("strong",null,"Code: "),"Lib")),r.a.createElement(k.a,{component:"p",gutterBottom:!0}),r.a.createElement(C,{onGenerateKey:this.handleRootRSAOAEPKeyChange}),r.a.createElement(k.a,{variant:"body1",gutterBottom:!0},"Root Key Set: ",this.state.isRootRSAOAEPKeySet.toString())),r.a.createElement("section",null,r.a.createElement(P.a,{variant:"middle"}),r.a.createElement(k.a,{variant:"h2",component:"h2",gutterBottom:!0},"Step 2: Export Keys"),r.a.createElement(k.a,{component:"p",gutterBottom:!0},r.a.createElement("strong",null,"User Story:")," They will be able to export the private and public keys in a format that can be saved"),r.a.createElement(k.a,{component:"p",gutterBottom:!0},r.a.createElement(S.a,{href:"https://github.com/johnnolan/react-jest-webcrypto/blob/master/src/components/ExportKeys.js"},r.a.createElement("strong",null,"Code: "),"React Component"),r.a.createElement("br",null),r.a.createElement(S.a,{href:"https://github.com/johnnolan/react-jest-webcrypto/blob/master/src/lib/exportKeys.js"},r.a.createElement("strong",null,"Code: "),"Lib")),r.a.createElement(k.a,{component:"p",gutterBottom:!0}),r.a.createElement(T,{onExportKeys:this.handleExportKeys,rootKey:this.state.RootRSAOAEPKey,jwkPublicKey:this.state.jwkPublicKey,jwkPrivateKey:this.state.jwkPrivateKey,isRootKeySet:this.state.isRootRSAOAEPKeySet})),r.a.createElement("section",null,r.a.createElement(P.a,{variant:"middle"}),r.a.createElement(k.a,{variant:"h2",component:"h2",gutterBottom:!0},"Step 3: Import Key"),r.a.createElement(k.a,{component:"p",gutterBottom:!0},r.a.createElement("strong",null,"User Story:")," They will be able to re-import these keys to use"),r.a.createElement(k.a,{component:"p",gutterBottom:!0},r.a.createElement(S.a,{href:"https://github.com/johnnolan/react-jest-webcrypto/blob/master/src/components/ImportKeys.js"},r.a.createElement("strong",null,"Code: "),"React Component"),r.a.createElement("br",null),r.a.createElement(S.a,{href:"https://github.com/johnnolan/react-jest-webcrypto/blob/master/src/lib/importKeys.js"},r.a.createElement("strong",null,"Code: "),"Lib")),r.a.createElement(k.a,{component:"p",gutterBottom:!0}),r.a.createElement(U,{onImportKeys:this.handleImportKeys,jwkPublicKey:this.state.jwkPublicKey,jwkPrivateKey:this.state.jwkPrivateKey,importedPublicKey:this.state.importedPublicKey,importedPrivateKey:this.state.importedPrivateKey})),r.a.createElement("section",null,r.a.createElement(P.a,{variant:"middle"}),r.a.createElement(k.a,{variant:"h2",component:"h2",gutterBottom:!0},"Step 4: SHA Encrypt Object"),r.a.createElement(k.a,{component:"p",gutterBottom:!0},r.a.createElement("strong",null,"User Story:")," They will be able to encrypt a message using their public key"),r.a.createElement(k.a,{component:"p",gutterBottom:!0},r.a.createElement(S.a,{href:"https://github.com/johnnolan/react-jest-webcrypto/blob/master/src/components/EncryptMessage.js"},r.a.createElement("strong",null,"Code: "),"React Component"),r.a.createElement("br",null),r.a.createElement(S.a,{href:"https://github.com/johnnolan/react-jest-webcrypto/blob/master/src/lib/encryptMessage.js"},r.a.createElement("strong",null,"Code: "),"Lib")),r.a.createElement(k.a,{component:"p",gutterBottom:!0}),r.a.createElement(W,{onEncryptMessage:this.handleEncryptMessage,onMessageToEncryptChange:this.handleMessageToEncryptChange,importedPublicKey:this.state.importedPublicKey,messageToEncrypt:this.state.messageToEncrypt,encryptedMessage:this.state.encryptedMessage})),r.a.createElement("section",null,r.a.createElement(P.a,{variant:"middle"}),r.a.createElement(k.a,{variant:"h2",component:"h2",gutterBottom:!0},"Step 5: SHA Decrypt"),r.a.createElement(k.a,{component:"p",gutterBottom:!0},r.a.createElement("strong",null,"User Story:")," They will be able to decrypt their message using their private key"),r.a.createElement(k.a,{component:"p",gutterBottom:!0},r.a.createElement(S.a,{href:"https://github.com/johnnolan/react-jest-webcrypto/blob/master/src/components/DecryptMessage.js"},r.a.createElement("strong",null,"Code: "),"React Component"),r.a.createElement("br",null),r.a.createElement(S.a,{href:"https://github.com/johnnolan/react-jest-webcrypto/blob/master/src/lib/decryptMessage.js"},r.a.createElement("strong",null,"Code: "),"Lib")),r.a.createElement(k.a,{component:"p",gutterBottom:!0}),r.a.createElement(J,{onDecryptMessage:this.handleDecryptMessage,importedPrivateKey:this.state.importedPrivateKey,encryptedMessage:this.state.encryptedMessage,decryptedMessage:this.state.decryptedMessage})))}}]),t}(r.a.Component);function M(e){return R.apply(this,arguments)}function R(){return(R=Object(j.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.crypto.subtle.exportKey("jwk",t).then(function(e){return e}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function B(){return(B=Object(j.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",M(t.publicKey));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function x(){return(x=Object(j.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",M(t.privateKey));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var T=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(b.a)(t).call(this,e))).handleChange=a.handleChange.bind(Object(E.a)(a)),a}return Object(g.a)(t,e),Object(y.a)(t,[{key:"handleChange",value:function(e){var t=this;e.preventDefault();var a=this.props.rootKey;(function(e){return B.apply(this,arguments)})(a).then(function(e){(function(e){return x.apply(this,arguments)})(a).then(function(a){t.props.onExportKeys(e,a)})})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(O.a,{disabled:!this.props.isRootKeySet,onClick:this.handleChange,label:"Export Root RSA-OAEPKeys"})),r.a.createElement("div",null,r.a.createElement(k.a,{variant:"body1",gutterBottom:!0},"Exported JWK Public Key"),r.a.createElement("textarea",{rows:"6",cols:"100",readOnly:!0,value:JSON.stringify(this.props.jwkPublicKey)})),r.a.createElement("div",null,r.a.createElement(k.a,{variant:"body1",gutterBottom:!0},"Exported JWK Private Key"),r.a.createElement("textarea",{rows:"6",cols:"100",readOnly:!0,value:JSON.stringify(this.props.jwkPrivateKey)})))}}]),t}(r.a.Component);function D(){return(D=Object(j.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.crypto.subtle.importKey("jwk",t,{name:"RSA-OAEP",hash:"SHA-256"},!0,["encrypt"]));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function I(){return(I=Object(j.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.crypto.subtle.importKey("jwk",t,{name:"RSA-OAEP",hash:"SHA-256"},!0,["decrypt"]));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var U=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(b.a)(t).call(this,e))).handleChange=a.handleChange.bind(Object(E.a)(a)),a}return Object(g.a)(t,e),Object(y.a)(t,[{key:"handleChange",value:function(e){var t=this;e.preventDefault();var a=this.props.jwkPublicKey,n=this.props.jwkPrivateKey;(function(e){return D.apply(this,arguments)})(a).then(function(e){(function(e){return I.apply(this,arguments)})(n).then(function(a){console.log("### Imported Keys ###"),console.log("importedPublicKey",e),console.log("importedPrivateKey",a),t.props.onImportKeys(e,a)})})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(O.a,{onClick:this.handleChange,label:"Import Public and Private Key (Check console for CryptoKey)",disabled:""===this.props.jwkPublicKey})),r.a.createElement("div",null,r.a.createElement(k.a,{variant:"body1",gutterBottom:!0},"Imported Public Key: ",(""!==this.props.importedPublicKey).toString())),r.a.createElement("div",null,r.a.createElement(k.a,{variant:"body1",gutterBottom:!0},"Imported Private Key: ",(""!==this.props.importedPrivateKey).toString())))}}]),t}(r.a.Component);function H(){return(H=Object(j.a)(f.a.mark(function e(t,a){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.crypto.subtle.encrypt({name:"RSA-OAEP"},t,a));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var W=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(b.a)(t).call(this,e))).handleChange=a.handleChange.bind(Object(E.a)(a)),a.handleMessageChange=a.handleMessageChange.bind(Object(E.a)(a)),a}return Object(g.a)(t,e),Object(y.a)(t,[{key:"handleChange",value:function(e){var t=this;e.preventDefault(),function(e,t){return H.apply(this,arguments)}(this.props.importedPublicKey,(new TextEncoder).encode(this.props.messageToEncrypt)).then(function(e){t.props.onEncryptMessage(e)})}},{key:"handleMessageChange",value:function(e){this.props.onMessageToEncryptChange(e.target.value)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(O.a,{disabled:""===this.props.importedPublicKey,onClick:this.handleChange,label:"Encrypt Message"})),r.a.createElement("div",null,r.a.createElement(k.a,{variant:"body1",gutterBottom:!0},"Message to Encrypt"),r.a.createElement("textarea",{rows:"6",cols:"100",value:this.props.messageToEncrypt,onChange:this.handleMessageChange})),r.a.createElement("div",null,r.a.createElement(k.a,{variant:"body1",gutterBottom:!0},"Encrypted Message (ArrayBuffer to Hex for demo)"),r.a.createElement("textarea",{rows:"6",cols:"100",readOnly:!0,value:(e=this.props.encryptedMessage,Array.prototype.map.call(new Uint8Array(e),function(e){return("00"+e.toString(16)).slice(-2)}).join(""))})));var e}}]),t}(r.a.Component);function F(){return(F=Object(j.a)(f.a.mark(function e(t,a){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.crypto.subtle.decrypt({name:"RSA-OAEP"},t,a));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var J=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(b.a)(t).call(this,e))).handleChange=a.handleChange.bind(Object(E.a)(a)),a}return Object(g.a)(t,e),Object(y.a)(t,[{key:"handleChange",value:function(e){var t=this;e.preventDefault(),function(e,t){return F.apply(this,arguments)}(this.props.importedPrivateKey,this.props.encryptedMessage).then(function(e){t.props.onDecryptMessage((new TextDecoder).decode(e))})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(O.a,{disabled:""===this.props.importedPrivateKey||""===this.props.encryptedMessage,onClick:this.handleChange,label:"Decrypt Message"})),r.a.createElement("div",null,r.a.createElement(k.a,{variant:"body1",gutterBottom:!0},"Decrypted Message"),r.a.createElement("textarea",{rows:"6",cols:"100",readOnly:!0,value:this.props.decryptedMessage})))}}]),t}(r.a.Component),L=a(242),G=function(e){function t(){return Object(h.a)(this,t),Object(d.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){return r.a.createElement(L.a,{maxWidth:"sm"},r.a.createElement(k.a,{variant:"h1",component:"h1",gutterBottom:!0},"Test WebCrypto"),r.a.createElement(A,null))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(function(){return r.a.createElement(p.a,{muiTheme:m()(s.a)},r.a.createElement(G,null))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[110,1,2]]]);
//# sourceMappingURL=main.8b9c1d03.chunk.js.map